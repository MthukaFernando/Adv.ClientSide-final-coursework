import{u as V,r as c,j as e,c as q,T as H,a as z,b as y,d as S,L as k,S as p,D as K,e as W,H as Y,R as _,f as C}from"./vendor-B6QPabx7.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))d(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const t of o.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&d(t)}).observe(document,{childList:!0,subtree:!0});function i(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(l){if(l.ep)return;l.ep=!0;const o=i(l);fetch(l.href,o)}})();function G(){const{id:r}=V(),[a,i]=c.useState(null);if(c.useEffect(()=>{fetch("/Adv.ClientSide-final-coursework/properties.json").then(l=>l.json()).then(l=>{const o=l.properties.find(t=>t.id===r);i(o)}).catch(l=>console.error("Error loading JSON:",l))},[r]),!a)return e.jsx("p",{children:"Loading property..."});const d=a.images.map(l=>({original:`/Adv.ClientSide-final-coursework/${l}`,thumbnail:`/Adv.ClientSide-final-coursework/${l}`}));return e.jsxs("div",{className:"property-page",children:[e.jsx(q,{items:d,showPlayButton:!1,showFullscreenButton:!1,thumbnailPosition:"bottom"}),e.jsxs("table",{className:"property-details-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ðŸ  Type"}),e.jsx("th",{children:"ðŸ’µ Price"}),e.jsx("th",{children:"ðŸ›ï¸ Bedrooms"}),e.jsx("th",{children:"ðŸ“ Location"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:a.type}),e.jsxs("td",{children:["$",Number(a.price).toLocaleString()]}),e.jsx("td",{children:a.bedrooms}),e.jsx("td",{children:a.location})]})})]}),e.jsx("table",{className:"property-details-table-mobile",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"ðŸ  Type"}),e.jsx("td",{children:a.type})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"ðŸ’µ Price"}),e.jsxs("td",{children:["$",Number(a.price).toLocaleString()]})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"ðŸ›ï¸ Bedrooms"}),e.jsx("td",{children:a.bedrooms})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"ðŸ“ Location"}),e.jsx("td",{children:a.location})]})]})}),e.jsx("div",{className:"tab-container",children:e.jsxs(H,{children:[e.jsxs(z,{children:[e.jsx(y,{children:"Description"}),e.jsx(y,{children:"Floor Plan"}),e.jsx(y,{children:"Map"})]}),e.jsx(S,{children:e.jsx("p",{className:"description",children:a.description})}),e.jsx(S,{children:e.jsx("img",{src:a.floor,alt:"Floor plan",className:"floor-plan"})}),e.jsx(S,{children:e.jsx("div",{className:"map-container",children:e.jsx("iframe",{src:a.map,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",className:"google-map"})})})]})}),e.jsx("div",{className:"back-button-container",children:e.jsx(k,{to:"/",className:"back-button",children:"â† Back"})})]})}function Q({favourites:r,onRemove:a,onAdd:i,onRemoveAll:d}){const[l,o]=c.useState(!1);return e.jsxs("div",{className:"fav-panel-wrapper",children:[e.jsxs("div",{className:`favourites-panel ${l?"highlight":""}`,onDragOver:t=>{t.preventDefault(),o(!0)},onDragLeave:()=>o(!1),onDrop:t=>{t.preventDefault(),o(!1);const h=t.dataTransfer.getData("property");if(!h)return;const m=JSON.parse(h);i(m)},children:[e.jsxs("div",{className:"fav-header",children:[e.jsx("h3",{className:"fav-heading",children:"My Favourites"}),r.length>0&&e.jsx("button",{className:"remove-all-btn",onClick:d,children:"ðŸ—‘ï¸ Remove All"})]}),r.length===0?e.jsx("div",{className:"placeholder",children:e.jsxs("p",{children:["Drag and drop a property here",e.jsx("br",{}),'or click "Add to favourites"']})}):r.map(t=>e.jsxs("div",{className:"fav-card",draggable:!0,onDragStart:h=>{h.dataTransfer.setData("property",JSON.stringify(t)),h.dataTransfer.effectAllowed="move"},children:[e.jsx("img",{src:t.picture,alt:t.type,className:"fav-img"}),e.jsxs("div",{className:"fav-content",children:[e.jsxs("p",{children:["Type: ",t.type]}),e.jsxs("p",{children:["Price: $",t.price]}),e.jsxs("p",{className:"no-need-for-query",children:["Bedrooms: ",t.bedrooms]}),e.jsxs("p",{className:"no-need-for-query",children:["Address: ",t.location]}),e.jsxs("div",{className:"fav-buttons",children:[e.jsx(k,{to:`/property/${t.id}`,children:e.jsx("button",{className:"view-button",children:"View property"})}),e.jsx("button",{className:"remove-button",onClick:()=>a(t.id),children:"Remove"})]})]})]},t.id))]}),r.length>0&&e.jsx("button",{className:"remove-all-btn-mobile",onClick:d,children:"ðŸ—‘ï¸ Remove All"})]})}const U=[{value:"House",label:"House"},{value:"Flat",label:"Flat"},{value:"Bungalow",label:"Bungalow"},{value:"Penthouse",label:"Penthouse"}],B=[{value:2e5,label:"$200,000"},{value:4e5,label:"$400,000"},{value:6e5,label:"$600,000"},{value:8e5,label:"$800,000"},{value:1e6,label:"$1,000,000"},{value:12e5,label:"$1,200,000"},{value:14e5,label:"$1,400,000"}],v=[...Array.from({length:7},(r,a)=>({value:a+1,label:`${a+1}`}))],D=[{value:"BR1",label:"BR1"},{value:"BR2",label:"BR2"},{value:"BR3",label:"BR3"},{value:"BR4",label:"BR4"},{value:"BR5",label:"BR5"},{value:"BR6",label:"BR6"}];function X({property:r,addToFavourites:a}){return e.jsxs("div",{className:"property-card",draggable:!0,onDragStart:i=>{i.dataTransfer.setData("property",JSON.stringify(r)),i.dataTransfer.effectAllowed="copy"},children:[e.jsx("img",{className:"property-img",src:r.picture,alt:r.type}),e.jsxs("div",{className:"property-content",children:[e.jsx("h2",{className:"property-heading",children:r.type}),e.jsx("p",{className:"short-description",children:r.shortDescription}),e.jsxs("p",{className:"property-details",children:["ðŸ’µ Price: $",Number(r.price).toLocaleString()]}),e.jsxs("p",{className:"property-details",children:["ðŸ›ï¸ Bedrooms: ",r.bedrooms]}),e.jsxs("p",{className:"property-details",children:["Address: ",r.location]}),e.jsxs("p",{className:"property-details",children:["ðŸ—“ï¸ Date Added: ",r.added.day," ",r.added.month,","," ",r.added.year]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx(k,{to:`/property/${r.id}`,children:e.jsx("button",{children:"View property"})}),e.jsx("button",{onClick:()=>a(r),children:"Add to favourites"})]})]})]})}function Z(){const[r,a]=c.useState([]),[i,d]=c.useState([]),[l,o]=c.useState(null),[t,h]=c.useState(null),[m,M]=c.useState(null),[g,$]=c.useState(null),[b,O]=c.useState(null),[j,R]=c.useState(null),[f,A]=c.useState(null),[T,N]=c.useState(()=>{const s=localStorage.getItem("favourites");return s?JSON.parse(s):[]}),P=s=>{N(n=>{if(n.find(x=>x.id===s.id))return n;const u=[...n,s];return localStorage.setItem("favourites",JSON.stringify(u)),u})},w=s=>{N(n=>{const u=n.filter(x=>x.id!==s);return localStorage.setItem("favourites",JSON.stringify(u)),u})},F=()=>{N([]),localStorage.setItem("favourites",JSON.stringify([]))};c.useEffect(()=>{fetch("properties.json").then(s=>s.json()).then(s=>{a(s.properties),d(s.properties)}).catch(s=>console.error("Error loading JSON:",s))},[]);const L=()=>{const s=r.filter(n=>{const u=!l||l.value===""||n.type===l.value,x=(!m||n.price>=m.value)&&(!g||n.price<=g.value),I=(!b||Number(n.bedrooms)>=Number(b))&&(!j||Number(n.bedrooms)<=Number(j)),J=!t||new Date(n.added.year,new Date(`${n.added.month} 1`).getMonth(),n.added.day)>=t,E=!f||n.location.toLowerCase().includes(f.toLowerCase());return u&&x&&I&&J&&E});d(s)};return e.jsxs("div",{className:"app",children:[e.jsx("header",{className:"header",children:e.jsx("h1",{className:"logo",children:"everNest"})}),e.jsxs("div",{className:"main-container",children:[e.jsxs("div",{className:"content-container",onDragOver:s=>s.preventDefault(),onDrop:s=>{s.preventDefault();const n=s.dataTransfer.getData("property");if(!n)return;const u=JSON.parse(n);w(u.id)},children:[e.jsxs("form",{className:"filters",onSubmit:s=>{s.preventDefault(),L()},children:[e.jsx("h2",{className:"quote",children:"You're just a few clicks away from your dream home"}),e.jsx(p,{options:U,value:l,onChange:o,placeholder:"Select Type",isClearable:!0,styles:{control:s=>({...s,color:"black"}),singleValue:s=>({...s,color:"black"}),placeholder:s=>({...s,color:"black"}),menu:s=>({...s,backgroundColor:"white",color:"black"})}}),e.jsx(p,{options:B,value:m,onChange:M,placeholder:"Min Price$",isClearable:!0,styles:{control:s=>({...s,color:"black"}),singleValue:s=>({...s,color:"black"}),placeholder:s=>({...s,color:"black"}),menu:s=>({...s,backgroundColor:"white",color:"black"})}}),e.jsx(p,{options:B,value:g,onChange:$,placeholder:"Max Price",isClearable:!0,styles:{control:s=>({...s,color:"black"}),singleValue:s=>({...s,color:"black"}),placeholder:s=>({...s,color:"black"}),menu:s=>({...s,backgroundColor:"white",color:"black"})}}),e.jsx(p,{options:v,value:b?v.find(s=>s.value===Number(b)):null,onChange:s=>{O(s?s.value:null)},placeholder:"Min Bedrooms",isClearable:!0,styles:{control:s=>({...s,color:"black"}),singleValue:s=>({...s,color:"black"}),placeholder:s=>({...s,color:"black"}),menu:s=>({...s,backgroundColor:"white",color:"black"})}}),e.jsx(p,{options:v,value:j?v.find(s=>s.value===Number(j)):null,onChange:s=>{R(s?s.value:null)},placeholder:"Max Bedrooms",isClearable:!0,styles:{control:s=>({...s,color:"black"}),singleValue:s=>({...s,color:"black"}),placeholder:s=>({...s,color:"black"}),menu:s=>({...s,backgroundColor:"white",color:"black"})}}),e.jsx(p,{options:D,value:f?D.find(s=>s.value===f):null,onChange:s=>A(s?s.value:null),placeholder:"Postal code",isClearable:!0,styles:{control:s=>({...s,color:"black"}),singleValue:s=>({...s,color:"black"}),placeholder:s=>({...s,color:"black"}),menu:s=>({...s,backgroundColor:"white",color:"black"})}}),e.jsx(K,{selected:t,onChange:s=>h(s),placeholderText:"Listed after",dateFormat:"yyyy-MM-dd",className:"date-picker"}),e.jsx("button",{type:"submit",className:"search-btn",children:"Search"})]}),e.jsx("div",{className:"results",children:i.length>0?i.map(s=>e.jsx(X,{property:s,addToFavourites:P},s.id)):e.jsx("p",{className:"no-properties",children:"Oops! We couldn't find any properties that match your filterðŸ˜”ðŸ˜”"})})]}),e.jsx(Q,{favourites:T,onRemove:w,onAdd:P,onRemoveAll:F})]})]})}W.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(Y,{children:e.jsxs(_,{children:[e.jsx(C,{path:"/",element:e.jsx(Z,{})}),e.jsx(C,{path:"/property/:id",element:e.jsx(G,{})})]})})}));
